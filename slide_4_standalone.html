<!-- Título -->
<h1 style="color: #141B59; font-size: 2rem; font-weight: 700; margin-bottom: 2rem;">Ejemplos</h1>

<!-- Card principal del quiz -->
<div style="max-width: 900px; margin: 0 auto; background: white; border-radius: 16px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1); padding: 2.5rem;">
    
    <!-- Pregunta -->
    <div style="background: linear-gradient(135deg, #cfe2ff 0%, #e7f1ff 100%); border-left: 4px solid #436AB1; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
        <p style="color: #141B59; font-size: 1.1rem; font-weight: 600; margin: 0; line-height: 1.6;">Ejemplo de pantalla de actividades. Lee el enunciado y selecciona la alternativa correcta. ¿Cuál de las siguientes opciones describe correctamente lo que ofrece este sistema de desarrollo de cursos?</p>
    </div>
    
    <!-- Opciones -->
    <div id="quiz-options" style="margin-bottom: 2rem;">
        
        <!-- Opción A -->
        <div class="quiz-option" id="quiz-option-0" data-index="0" style="background: #f8f9fa; padding: 1.2rem; border-radius: 12px; margin-bottom: 1rem; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
            <div style="display: flex; align-items: center;">
                <input type="radio" name="quiz-answer" id="option-0" value="0" style="position: absolute; opacity: 0; pointer-events: none;">
                <span style="background: #436AB1; color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 700; min-width: 45px; text-align: center; margin-right: 1rem; display: inline-block;">A</span>
                <span style="color: #141B59; font-size: 1rem; font-weight: 500; flex-grow: 1;">Un sistema basado en contenidos audiovisuales de alto consumo gráfico, dependiente de plataformas propietarias y sin seguimiento del avance del estudiante.</span>
                <i id="icon-0" class="bi bi-circle" style="font-size: 1.5rem; margin-left: 1rem; color: #6c757d;"></i>
            </div>
        </div>
        
        <!-- Opción B -->
        <div class="quiz-option" id="quiz-option-1" data-index="1" style="background: #f8f9fa; padding: 1.2rem; border-radius: 12px; margin-bottom: 1rem; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
            <div style="display: flex; align-items: center;">
                <input type="radio" name="quiz-answer" id="option-1" value="1" style="position: absolute; opacity: 0; pointer-events: none;">
                <span style="background: #436AB1; color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 700; min-width: 45px; text-align: center; margin-right: 1rem; display: inline-block;">B</span>
                <span style="color: #141B59; font-size: 1rem; font-weight: 500; flex-grow: 1;">Un sistema para crear cursos en páginas web responsivas, con bajo consumo de recursos gráficos, integración multimedia y registro del avance bajo estándar SCORM 1.2.</span>
                <i id="icon-1" class="bi bi-circle" style="font-size: 1.5rem; margin-left: 1rem; color: #6c757d;"></i>
            </div>
        </div>
        
        <!-- Opción C -->
        <div class="quiz-option" id="quiz-option-2" data-index="2" style="background: #f8f9fa; padding: 1.2rem; border-radius: 12px; margin-bottom: 1rem; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
            <div style="display: flex; align-items: center;">
                <input type="radio" name="quiz-answer" id="option-2" value="2" style="position: absolute; opacity: 0; pointer-events: none;">
                <span style="background: #436AB1; color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 700; min-width: 45px; text-align: center; margin-right: 1rem; display: inline-block;">C</span>
                <span style="color: #141B59; font-size: 1rem; font-weight: 500; flex-grow: 1;">Una plataforma cerrada de autoría que requiere licencias específicas y no permite adaptación a otros LMS.</span>
                <i id="icon-2" class="bi bi-circle" style="font-size: 1.5rem; margin-left: 1rem; color: #6c757d;"></i>
            </div>
        </div>
        
        <!-- Opción D -->
        <div class="quiz-option" id="quiz-option-3" data-index="3" style="background: #f8f9fa; padding: 1.2rem; border-radius: 12px; margin-bottom: 1rem; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;">
            <div style="display: flex; align-items: center;">
                <input type="radio" name="quiz-answer" id="option-3" value="3" style="position: absolute; opacity: 0; pointer-events: none;">
                <span style="background: #436AB1; color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 700; min-width: 45px; text-align: center; margin-right: 1rem; display: inline-block;">D</span>
                <span style="color: #141B59; font-size: 1rem; font-weight: 500; flex-grow: 1;">Un sistema enfocado exclusivamente en evaluaciones, sin navegación guiada ni estructura por slides.</span>
                <i id="icon-3" class="bi bi-circle" style="font-size: 1.5rem; margin-left: 1rem; color: #6c757d;"></i>
            </div>
        </div>
        
    </div>
    
    <!-- Botón Verificar (inicialmente oculto hasta que seleccione algo) -->
    <div style="text-align: center; margin-bottom: 2rem;">
        <button id="verify-btn" disabled style="background: linear-gradient(135deg, #436AB1 0%, #141B59 100%); color: white; padding: 0.8rem 2.5rem; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 600; cursor: pointer; opacity: 0.5; transition: all 0.3s ease;">Verificar Respuesta</button>
    </div>
    
    <!-- Explicación (inicialmente oculta) -->
    <div id="explanation" style="display: none; background: linear-gradient(135deg, #cff4fc 0%, #e7f6fc 100%); border-left: 4px solid #0dcaf0; padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem;">
        <div style="display: flex; align-items: start; gap: 1rem;">
            <i class="bi bi-lightbulb-fill" style="font-size: 1.8rem; color: #0dcaf0; flex-shrink: 0;"></i>
            <div>
                <h6 style="color: #055160; font-size: 1.1rem; font-weight: 700; margin-bottom: 0.8rem;">Explicación</h6>
                <p style="color: #436AB1; margin: 0; line-height: 1.6;">El sistema permite crear cursos basados en páginas web responsivas, con bajo consumo de recursos gráficos, integración de contenido multimedia y registro automático del avance del estudiante bajo estándar SCORM 1.2, lo que lo hace adaptable a cualquier LMS.</p>
            </div>
        </div>
    </div>
    
</div>

<!-- Modal de feedback (inicialmente oculto) -->
<div id="feedback-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 9999; align-items: center; justify-content: center;">
    <div style="background: white; border-radius: 16px; padding: 3rem; max-width: 500px; width: 90%; text-align: center; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);">
        <div id="modal-icon" style="font-size: 5rem; margin-bottom: 1.5rem;"></div>
        <h3 id="modal-title" style="font-size: 1.8rem; font-weight: 700; margin-bottom: 1rem;"></h3>
        <p id="modal-message" style="color: #6c757d; font-size: 1rem; line-height: 1.6; margin-bottom: 2rem;"></p>
        <button id="modal-btn" onclick="closeModal()" style="padding: 0.8rem 2.5rem; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; color: white;">Continuar</button>
    </div>
</div>

<!-- Modal de feedback (inicialmente oculto) -->
<div id="feedback-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 9999; align-items: center; justify-content: center;">
    <div style="background: white; border-radius: 16px; padding: 3rem; max-width: 500px; width: 90%; text-align: center; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);">
        <div id="modal-icon" style="font-size: 5rem; margin-bottom: 1.5rem;"></div>
        <h3 id="modal-title" style="font-size: 1.8rem; font-weight: 700; margin-bottom: 1rem;"></h3>
        <p id="modal-message" style="color: #6c757d; font-size: 1rem; line-height: 1.6; margin-bottom: 2rem;"></p>
        <button id="modal-btn" style="padding: 0.8rem 2.5rem; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; color: white;">Continuar</button>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<script>
(function() {
    // La respuesta correcta es la opción 1 (índice 1, que es la B)
    var correctAnswer = 1;
    var selectedOption = null;
    
    // Función para inicializar el quiz
    function initQuiz() {
        // Asignar eventos a las opciones
        for (var i = 0; i < 4; i++) {
            (function(index) {
                var optionElement = document.getElementById('quiz-option-' + index);
                if (optionElement) {
                    optionElement.onclick = function() {
                        selectOption(index);
                    };
                }
            })(i);
        }
        
        // Asignar evento al botón de verificar
        var verifyBtn = document.getElementById('verify-btn');
        if (verifyBtn) {
            verifyBtn.onclick = function() {
                verifyAnswer();
            };
        }
        
        // Asignar evento al botón del modal
        var modalBtn = document.getElementById('modal-btn');
        if (modalBtn) {
            modalBtn.onclick = function() {
                closeModal();
            };
        }
    }
    
    function selectOption(index) {
        selectedOption = index;
        
        // Quitar selección de todas las opciones (0 a 3)
        for (var i = 0; i < 4; i++) {
            var opt = document.getElementById('quiz-option-' + i);
            var icon = document.getElementById('icon-' + i);
            if (opt) {
                opt.style.background = '#f8f9fa';
                opt.style.borderColor = 'transparent';
            }
            if (icon) {
                icon.className = 'bi bi-circle';
                icon.style.color = '#6c757d';
            }
        }
        
        // Marcar la opción seleccionada
        var selectedElement = document.getElementById('quiz-option-' + index);
        var selectedIcon = document.getElementById('icon-' + index);
        if (selectedElement) {
            selectedElement.style.background = 'linear-gradient(135deg, #f0f4ff 0%, #e7f1ff 100%)';
            selectedElement.style.borderColor = '#436AB1';
        }
        if (selectedIcon) {
            selectedIcon.className = 'bi bi-check-circle-fill';
            selectedIcon.style.color = '#436AB1';
        }
        
        // Marcar el radio button
        var radio = document.getElementById('option-' + index);
        if (radio) {
            radio.checked = true;
        }
        
        // Habilitar botón de verificar
        var verifyBtn = document.getElementById('verify-btn');
        if (verifyBtn) {
            verifyBtn.disabled = false;
            verifyBtn.style.opacity = '1';
            verifyBtn.style.cursor = 'pointer';
        }
    }
    
    function verifyAnswer() {
        if (selectedOption === null) return;
        
        // Deshabilitar todas las opciones
        for (var i = 0; i < 4; i++) {
            var opt = document.getElementById('quiz-option-' + i);
            if (opt) {
                opt.style.cursor = 'not-allowed';
                opt.style.pointerEvents = 'none';
                opt.onclick = null;
            }
        }
        
        // Deshabilitar botón de verificar
        var verifyBtn = document.getElementById('verify-btn');
        if (verifyBtn) {
            verifyBtn.style.display = 'none';
        }
        
        var isCorrect = (selectedOption === correctAnswer);
        
        // Marcar la opción seleccionada
        var selectedElement = document.getElementById('quiz-option-' + selectedOption);
        var selectedIcon = document.getElementById('icon-' + selectedOption);
        
        if (isCorrect) {
            // Respuesta correcta - verde
            if (selectedElement) {
                selectedElement.style.background = 'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)';
                selectedElement.style.borderColor = '#22c55e';
            }
            if (selectedIcon) {
                selectedIcon.className = 'bi bi-check-circle-fill';
                selectedIcon.style.color = '#22c55e';
            }
            
            // Mostrar explicación
            var explanation = document.getElementById('explanation');
            if (explanation) {
                explanation.style.display = 'block';
            }
            
            // Mostrar modal de éxito
            showModal(true);
        } else {
            // Respuesta incorrecta - rojo
            if (selectedElement) {
                selectedElement.style.background = 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)';
                selectedElement.style.borderColor = '#ef4444';
            }
            if (selectedIcon) {
                selectedIcon.className = 'bi bi-x-circle-fill';
                selectedIcon.style.color = '#ef4444';
            }
            
            // Mostrar también la correcta en verde
            var correctElement = document.getElementById('quiz-option-' + correctAnswer);
            var correctIcon = document.getElementById('icon-' + correctAnswer);
            if (correctElement) {
                correctElement.style.background = 'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)';
                correctElement.style.borderColor = '#22c55e';
            }
            if (correctIcon) {
                correctIcon.className = 'bi bi-check-circle-fill';
                correctIcon.style.color = '#22c55e';
            }
            
            // Mostrar modal de error
            showModal(false);
        }
    }
    
    function showModal(isCorrect) {
        var modal = document.getElementById('feedback-modal');
        var icon = document.getElementById('modal-icon');
        var title = document.getElementById('modal-title');
        var message = document.getElementById('modal-message');
        var btn = document.getElementById('modal-btn');
        
        if (isCorrect) {
            if (icon) icon.innerHTML = '✅';
            if (title) {
                title.textContent = '¡Correcto!';
                title.style.color = '#22c55e';
            }
            if (message) {
                message.textContent = 'El sistema permite crear cursos basados en páginas web responsivas, con bajo consumo de recursos gráficos, integración de contenido multimedia y registro automático del avance del estudiante bajo estándar SCORM 1.2, lo que lo hace adaptable a cualquier LMS.';
            }
            if (btn) {
                btn.style.background = 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)';
                btn.textContent = 'Continuar';
            }
        } else {
            if (icon) icon.innerHTML = '❌';
            if (title) {
                title.textContent = 'Incorrecto';
                title.style.color = '#ef4444';
            }
            if (message) {
                message.textContent = 'La alternativa seleccionada no describe las características reales del sistema. Revisa los elementos clave: estructura en slides, bajo consumo de recursos gráficos, integración multimedia y registro del avance bajo estándar SCORM 1.2.';
            }
            if (btn) {
                btn.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                btn.textContent = 'Reintentar';
            }
        }
        
        if (modal) {
            modal.style.display = 'flex';
        }
    }
    
    function closeModal() {
        var modal = document.getElementById('feedback-modal');
        if (modal) {
            modal.style.display = 'none';
        }
        
        // Si fue incorrecto, reiniciar
        if (selectedOption !== correctAnswer) {
            resetQuiz();
        }
    }
    
    function resetQuiz() {
        selectedOption = null;
        
        // Resetear todas las opciones
        for (var i = 0; i < 4; i++) {
            var opt = document.getElementById('quiz-option-' + i);
            var icon = document.getElementById('icon-' + i);
            if (opt) {
                opt.style.background = '#f8f9fa';
                opt.style.borderColor = 'transparent';
                opt.style.cursor = 'pointer';
                opt.style.pointerEvents = 'auto';
                (function(index) {
                    opt.onclick = function() { selectOption(index); };
                })(i);
            }
            if (icon) {
                icon.className = 'bi bi-circle';
                icon.style.color = '#6c757d';
            }
        }
        
        // Resetear radio buttons
        for (var i = 0; i < 4; i++) {
            var radio = document.getElementById('option-' + i);
            if (radio) {
                radio.checked = false;
            }
        }
        
        // Deshabilitar botón de verificar
        var verifyBtn = document.getElementById('verify-btn');
        if (verifyBtn) {
            verifyBtn.disabled = true;
            verifyBtn.style.opacity = '0.5';
            verifyBtn.style.cursor = 'not-allowed';
            verifyBtn.style.display = 'block';
        }
        
        // Ocultar explicación
        var explanation = document.getElementById('explanation');
        if (explanation) {
            explanation.style.display = 'none';
        }
    }
    
    // Inicializar cuando el DOM esté listo
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initQuiz);
    } else {
        initQuiz();
    }
    
    // También intentar inicializar después de un pequeño delay por si Moodle carga el contenido dinámicamente
    setTimeout(initQuiz, 100);
})();
</script>

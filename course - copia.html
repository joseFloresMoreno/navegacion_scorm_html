<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso SCORM - Navegaci√≥n</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="course.css">
    <style>
        /* ====================================
           VARIABLES DE TEMA - F√ÅCIL PERSONALIZACI√ìN
           Cambia estos colores para adaptar el curso
           ==================================== */
        :root {
            /* Colores principales del curso */
            --color-primary: #667eea;
            --color-primary-dark: #764ba2;
            --color-secondary: #f0f0f0;
            --color-accent: #10b981;
            
            /* Colores de fondo */
            --bg-gradient-start: #667eea;
            --bg-gradient-end: #764ba2;
            --bg-body: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            
            /* Colores de texto */
            --text-primary: #333;
            --text-secondary: #555;
            --text-muted: #999;
            --text-white: #ffffff;
            
            /* Colores de botones */
            --btn-primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --btn-primary-hover-shadow: rgba(102, 126, 234, 0.4);
            --btn-secondary-bg: #f0f0f0;
            --btn-secondary-hover: #e0e0e0;
            --btn-finish-bg: linear-gradient(135deg, #10b981 0%, #059669 100%);
            
            /* Colores de slides especiales */
            --slide-title-color: #667eea;
            
            /* Otros colores */
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --modal-overlay: rgba(0, 0, 0, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-body);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            font-family: 'Google Sans Flex', sans-serif;
        }

        .course-container {
            width: 100%;
            max-width: 1600px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px var(--shadow-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: auto;
        }

        .course-header {
            background: var(--bg-body);
            color: white;
            padding: 25px 30px;
            text-align: center;
            flex-shrink: 0;
        }

        .course-header h1 {
            font-size: 32px;
            margin-bottom: 5px;
            font-weight: 700;
            word-wrap: break-word;
        }

        .course-progress {
            display: flex;
            gap: 10px;
            margin-top: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            flex-shrink: 0;
        }

        .progress-dot.active {
            background: white;
            transform: scale(1.3);
        }

        .progress-dot.completed {
            background: rgba(255, 255, 255, 0.6);
        }

        .slide-container {
            padding: 50px 40px;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow-y: visible;
            flex-grow: 1;
        }

        /* Estilos para contenido generado din√°micamente por course.js */
        #course-content {
            position: relative !important;
            top: auto !important;
            left: auto !important;
            right: auto !important;
            bottom: auto !important;
            overflow-y: visible !important;
            padding: 50px 40px;
            min-height: 600px;
        }

        #course-content .slide-container {
            position: relative !important;
            padding: 0 !important;
            min-height: auto !important;
            max-height: none !important;
            overflow: visible !important;
            width: 100% !important;
            height: auto !important;
        }

        #course-content .slide-content {
            padding: 0 !important;
        }

        /* Ocultar navegaci√≥n generada por course.js */
        #course-content .slide-navigation {
            display: none !important;
        }

        .slide-content {
            flex: 0 0 auto;
            animation: fadeIn 0.3s ease-in;
        }

        /* Bootstrap Quiz Custom Styles */
        .quiz-option-wrapper {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: #f8f9fa;
        }
        
        .quiz-option-wrapper:hover:not(.disabled) {
            background: #e9ecef;
            border-color: var(--primary-color);
            transform: translateX(5px);
        }
        
        .quiz-option-wrapper.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .quiz-option-wrapper.correct {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .quiz-option-wrapper.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .quiz-radio-hidden {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
        
        .quiz-option-wrapper .badge {
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .quiz-option-wrapper .form-check-label {
            cursor: pointer;
            font-size: 1.1rem;
            padding-left: 10px;
        }
        
        .quiz-option-wrapper.disabled .form-check-label {
            cursor: not-allowed;
        }
        
        .quiz-check-icon {
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        /* Modal de finalizaci√≥n */
        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--modal-overlay);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeIn 0.3s ease-in;
        }

        .completion-modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            animation: slideUp 0.4s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .modal-content h2 {
            color: var(--color-primary);
            font-size: 28px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .modal-content p {
            color: var(--text-secondary);
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-modal {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-modal-primary {
            background: var(--btn-primary-bg);
            color: white;
        }

        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--btn-primary-hover-shadow);
        }

        .btn-modal-secondary {
            background: var(--btn-secondary-bg);
            color: var(--text-primary);
        }

        .btn-modal-secondary:hover {
            background: var(--btn-secondary-hover);
        }

        .slide-content img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .slide-content h2 {
            color: var(--slide-title-color);
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .slide-content p {
            color: var(--text-secondary);
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 15px;
            text-align: justify;
        }

        .slide-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            padding: 20px 40px;
            border-top: 1px solid var(--border-color);
            background: #f9f9f9;
            flex-shrink: 0;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--btn-primary-bg);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--btn-primary-hover-shadow);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--btn-secondary-bg);
            color: var(--text-primary);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--btn-secondary-hover);
            transform: translateY(-2px);
        }

        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .slide-counter {
            color: var(--text-muted);
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
        }

        .hidden {
            display: none !important;
        }

        /* Estilos para Quiz - Dise√±o Moderno */
        .quiz-options {
            max-width: 100%;
            margin: 0 auto;
        }

        .quiz-option {
            position: relative;
            background: #ffffff;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .quiz-option:hover:not(.quiz-option-disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
            border-color: var(--color-primary) !important;
            background: linear-gradient(135deg, #f8faff 0%, #f0f4ff 100%) !important;
        }

        .quiz-option-disabled {
            cursor: not-allowed !important;
        }

        .quiz-radio {
            accent-color: var(--color-primary);
            cursor: pointer;
        }

        .quiz-radio:disabled {
            cursor: not-allowed;
        }

        .quiz-option span {
            font-size: 17px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .quiz-option-correct {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important;
            border-color: #22c55e !important;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2) !important;
        }

        .quiz-option-incorrect {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%) !important;
            border-color: #ef4444 !important;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2) !important;
        }

        .quiz-explanation {
            max-width: 100%;
            animation: slideDown 0.4s ease-out;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 4px solid var(--color-primary);
            margin-top: 24px;
        }

        .quiz-explanation strong {
            color: var(--color-primary);
            font-weight: 700;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-modal {
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease-in;
        }

        .quiz-modal > div {
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .course-header h1 {
                font-size: 24px;
            }

            .slide-container {
                padding: 30px 20px;
                min-height: 400px;
                overflow-y: visible;
            }

            #course-content {
                overflow-y: visible !important;
            }

            .slide-content h2 {
                font-size: 22px;
            }

            .slide-content p {
                font-size: 14px;
            }

            button {
                padding: 10px 20px;
                font-size: 14px;
            }

            .slide-nav {
                padding: 15px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading screen -->
    <div id="loading" style="display: none;">
        <div class="flex items-center justify-center min-h-screen">
            <div class="text-center">
                <p class="text-white text-xl">Cargando curso...</p>
            </div>
        </div>
    </div>

    <!-- Main content -->
    <div id="main-content" class="course-container">
        <!-- Header con t√≠tulo y progreso -->
        <div class="course-header">
            <h1 id="course-title">Curso Interactivo</h1>
            <div class="course-progress" id="course-progress">
                <!-- Progress dots se generar√°n din√°micamente -->
            </div>
        </div>

        <!-- Contenedor de slides -->
        <div id="course-content" class="slide-container">
            <!-- El contenido se generar√° din√°micamente por course.js -->
        </div>

        <!-- Navegaci√≥n -->
        <div class="slide-nav" id="slide-navigation">
            <!-- La navegaci√≥n se generar√° din√°micamente por course.js -->
        </div>
    </div>

    <!-- Modal de finalizaci√≥n -->
    <div id="completion-modal" class="completion-modal">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <h2>¬°Curso Completado!</h2>
            <p>Felicitaciones, has completado exitosamente el curso. Tu progreso ha sido guardado en el sistema.</p>
            <div class="modal-buttons">
                <button class="btn-modal btn-modal-secondary" onclick="closeCompletionModal()">Revisar Curso</button>
                <button class="btn-modal btn-modal-primary" onclick="finishAndClose()">Finalizar</button>
            </div>
        </div>
    </div>

    <script>
        // Datos del curso compatibles con course.js
        const courseDataStructure = {
            courseData: {
                title: "Curso Interactivo",
                navigationMode: "slides",
                slides: [
                    {
                        id: "slide-0",
                        order: 0,
                        type: "page",
                        title: "P√°gina 1: Introducci√≥n",
                        convertedHtml: `
                            <div class="slide-content">
                                <img src="https://placehold.co/800x400/667eea/white?text=P√°gina+1:+Introducci√≥n" alt="Slide 1">
                                <h2>P√°gina 1: Introducci√≥n</h2>
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                            </div>
                        `
                    },
                    {
                        id: "slide-1",
                        order: 1,
                        type: "page",
                        title: "P√°gina 2: Conceptos Fundamentales",
                        convertedHtml: `
                            <div class="slide-content">
                                <img src="https://placehold.co/800x400/764ba2/white?text=P√°gina+2:+Conceptos" alt="Slide 2">
                                <h2>P√°gina 2: Conceptos Fundamentales</h2>
                                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                                <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.</p>
                            </div>
                        `
                    },
                    {
                        id: "slide-2",
                        order: 2,
                        type: "page",
                        title: "P√°gina 3: Desarrollo y Aplicaci√≥n",
                        convertedHtml: `
                            <div class="slide-content">
                                <img src="https://placehold.co/800x400/667eea/white?text=P√°gina+3:+Desarrollo" alt="Slide 3">
                                <h2>P√°gina 3: Desarrollo y Aplicaci√≥n</h2>
                                <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi.</p>
                                <p>Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus.</p>
                            </div>
                        `
                    },
                    {
                        id: "slide-3",
                        order: 3,
                        type: "page",
                        title: "P√°gina 4: An√°lisis Profundo",
                        convertedHtml: `
                            <div class="slide-content">
                                <img src="https://placehold.co/800x400/764ba2/white?text=P√°gina+4:+An√°lisis" alt="Slide 4">
                                <h2>P√°gina 4: An√°lisis Profundo</h2>
                                <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur.</p>
                                <p>Aut perferendis doloribus asperiores repellat. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua quis ipsum suspendisse ultrices gravida.</p>
                            </div>
                        `
                    },
                    {
                        id: "slide-4",
                        order: 4,
                        type: "page",
                        title: "P√°gina 5: Conclusi√≥n",
                        convertedHtml: `
                            <div class="slide-content">
                                <img src="https://placehold.co/800x400/667eea/white?text=P√°gina+5:+Conclusi√≥n" alt="Slide 5">
                                <h2>P√°gina 5: Conclusi√≥n</h2>
                                <p>Risus commodo viverra maecenas accumsan lacus vel facilisis volutpat est velit egestas dui id ornare arcu odio. Curabitur aliquet quam id dui posuere blandit vivamus suscipit tortor eget felis. Pellentesque pulvinar pellentesque pulvinar purus.</p>
                                <p>Donec sollicitudin molestie malesuada lorem ipsum dolor sit amet. Cras non velit nec insit semper est a mattis quam. Quisque porta volutpat erat nonummy euismod nulla facilisis at venenatis orci consequat vitae.</p>
                            </div>
                        `
                    },
                    {
                        id: "slide-5",
                        order: 5,
                        type: "quiz",
                        title: "Pregunta 2: Conceptos de Programaci√≥n",
                        content: {
                            question: "¬øQu√© significa HTML?",
                            options: [
                                "Hyper Text Markup Language",
                                "High Tech Modern Language",
                                "Home Tool Markup Language",
                                "Hyperlinks and Text Markup Language"
                            ],
                            correctAnswer: 0,
                            explanation: "HTML (HyperText Markup Language) es el lenguaje de marcado est√°ndar para crear p√°ginas web.",
                            feedbackCorrect: "¬°Perfecto! Conoces bien los fundamentos de HTML.",
                            feedbackIncorrect: "Intenta recordar que HTML significa HyperText Markup Language."
                        }
                    },
                    {
                        id: "slide-6",
                        order: 6,
                        type: "conclusion",
                        title: "¬°Gracias por tu Participaci√≥n!",
                        content: {
                            subtitle: "Has completado el m√≥dulo",
                            color: "#ec4899"
                        }
                    }
                ]
            }
        };

        // Variable para rastrear el √≠ndice actual de slides
        let currentIndex = 0;
        let totalSlidesCount = 7; // Actualizar seg√∫n el n√∫mero total de slides
        let isNavigating = false;

        // Funciones de navegaci√≥n que se conectan con CourseApp
        function nextSlide() {
            if (isNavigating || currentIndex >= totalSlidesCount - 1) return;
            isNavigating = true;
            currentIndex++;
            if (window.CourseApp && typeof window.CourseApp.nextSlide === 'function') {
                window.CourseApp.nextSlide();
            }
            setTimeout(() => {
                updateCustomNav();
                isNavigating = false;
            }, 100);
        }

        function previousSlide() {
            if (isNavigating || currentIndex <= 0) return;
            isNavigating = true;
            currentIndex--;
            if (window.CourseApp && typeof window.CourseApp.previousSlide === 'function') {
                window.CourseApp.previousSlide();
            }
            setTimeout(() => {
                updateCustomNav();
                isNavigating = false;
            }, 100);
        }

        // Funci√≥n para personalizar la navegaci√≥n
        function customizeNavigation() {
            const navContainer = document.getElementById('slide-navigation');
            if (!navContainer) return;

            // Verificar si estamos en la √∫ltima slide
            const isLastSlide = currentIndex === totalSlidesCount - 1;
            
            // Crear navegaci√≥n personalizada con el estilo actual
            let navHtml = `<button id="btn-prev" class="btn-secondary" onclick="previousSlide()">‚Üê Anterior</button>
                <span class="slide-counter"><span id="current-slide">${currentIndex + 1}</span> / ${totalSlidesCount}</span>`;
            
            // Si es la √∫ltima slide, mostrar bot√≥n "Finalizar Curso" en lugar de "Siguiente"
            if (isLastSlide) {
                navHtml += `<button id="btn-finish" class="btn-primary" onclick="showCompletionModal()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">üéì Finalizar Curso</button>`;
            } else {
                navHtml += `<button id="btn-next" class="btn-primary" onclick="nextSlide()">Siguiente ‚Üí</button>`;
            }
            
            navContainer.innerHTML = navHtml;
            updateCustomNav();
        }

        // Funci√≥n para actualizar el estado de navegaci√≥n
        function updateCustomNav() {
            const btnPrev = document.getElementById('btn-prev');
            const btnNext = document.getElementById('btn-next');
            const btnFinish = document.getElementById('btn-finish');
            const currentSlideSpan = document.getElementById('current-slide');
            
            if (btnPrev && currentSlideSpan) {
                currentSlideSpan.textContent = currentIndex + 1;
                btnPrev.disabled = currentIndex === 0;
                
                // Actualizar estilos visuales del bot√≥n anterior
                if (currentIndex === 0) {
                    btnPrev.style.opacity = '0.5';
                    btnPrev.style.cursor = 'not-allowed';
                } else {
                    btnPrev.style.opacity = '1';
                    btnPrev.style.cursor = 'pointer';
                }
            }
            
            // Si existe el bot√≥n "Siguiente" (no estamos en la √∫ltima slide)
            if (btnNext) {
                btnNext.disabled = currentIndex === totalSlidesCount - 1;
                
                if (currentIndex === totalSlidesCount - 1) {
                    btnNext.style.opacity = '0.5';
                    btnNext.style.cursor = 'not-allowed';
                } else {
                    btnNext.style.opacity = '1';
                    btnNext.style.cursor = 'pointer';
                }
            }

            // Actualizar puntos de progreso
            updateProgressDots();
        }

        // Funci√≥n para actualizar puntos de progreso
        function updateProgressDots() {
            const progressContainer = document.getElementById('course-progress');
            if (!progressContainer) return;

            // Crear puntos de progreso si no existen
            if (progressContainer.children.length === 0) {
                let dotsHtml = '';
                for (let i = 0; i < totalSlidesCount; i++) {
                    dotsHtml += `<div class="progress-dot" data-slide="${i}" onclick="goToSlideCustom(${i})"></div>`;
                }
                progressContainer.innerHTML = dotsHtml;
            }

            // Actualizar estado de los puntos
            const dots = progressContainer.querySelectorAll('.progress-dot');
            dots.forEach((dot, index) => {
                dot.classList.remove('active', 'completed');
                if (index === currentIndex) {
                    dot.classList.add('active');
                } else if (index < currentIndex) {
                    dot.classList.add('completed');
                }
            });
        }

        // Funci√≥n para ir a un slide espec√≠fico
        function goToSlideCustom(index) {
            if (isNavigating || index < 0 || index >= totalSlidesCount) return;
            isNavigating = true;
            currentIndex = index;
            if (window.CourseApp && typeof window.CourseApp.goToSlide === 'function') {
                window.CourseApp.goToSlide(index);
            }
            setTimeout(() => {
                updateCustomNav();
                isNavigating = false;
            }, 100);
        }

        // Observador para detectar cambios en el contenido
        function setupContentObserver() {
            const courseContent = document.getElementById('course-content');
            if (!courseContent) return;

            const observer = new MutationObserver(() => {
                customizeNavigation();
            });

            observer.observe(courseContent, {
                childList: true,
                subtree: true
            });
        }

        // Funci√≥n para mostrar el modal de completado
        function showCompletionModal() {
            const modal = document.getElementById('completion-modal');
            if (modal) {
                modal.classList.add('show');
                
                // Llamar a la funci√≥n SCORM de completado
                if (window.CourseApp && typeof window.CourseApp.completeCourse === 'function') {
                    console.log('‚úÖ Llamando a CourseApp.completeCourse()');
                    window.CourseApp.completeCourse();
                }
            }
        }

        // Funci√≥n para cerrar el modal
        function closeCompletionModal() {
            const modal = document.getElementById('completion-modal');
            if (modal) {
                modal.classList.remove('show');
            }
        }

        // Funci√≥n para finalizar y cerrar (podr√≠a cerrar la ventana o redirigir)
        function finishAndClose() {
            // Cerrar modal
            closeCompletionModal();
            
            // Intentar cerrar la ventana (solo funciona si fue abierta por script)
            // En un LMS, esto normalmente cierra la ventana del curso
            try {
                window.close();
            } catch (e) {
                console.log('No se pudo cerrar la ventana autom√°ticamente');
            }
            
            // Alternativa: mostrar mensaje de que puede cerrar
            alert('Gracias por completar el curso. Puedes cerrar esta ventana.');
        }

        // Inicializar el curso cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            // Esperar a que course.js cargue
            setTimeout(() => {
                if (window.CourseApp && typeof window.CourseApp.init === 'function') {
                    // Inicializar CourseApp
                    window.CourseApp.init(courseDataStructure);
                    
                    // Esperar a que se renderice el contenido
                    setTimeout(() => {
                        customizeNavigation();
                        setupContentObserver();
                        
                        // Actualizar navegaci√≥n inicial
                        currentIndex = 0;
                        updateCustomNav();
                    }, 800);
                } else {
                    console.error('CourseApp no est√° disponible. Aseg√∫rate de incluir course.js');
                }
            }, 100);
        });
    </script>

    <!-- Incluir archivos JavaScript -->
    <script src="api.js"></script>
    <script src="course.js"></script>
</body>
</html>
